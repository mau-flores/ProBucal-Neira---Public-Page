<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Clínica dental Probucal Neira: atención odontológica integral con tecnología moderna y profesionales especializados."
    />
    <title>Probucal Neira | Salud Dental Integral</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/decode.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header id="header"></header>

    <main class="container">
      <div id="sections"></div>
    </main>

    <footer id="footer"></footer>

    <script>
      fetch("./src/components/header.html")
        .then((r) => r.text())
        .then((t) => (document.getElementById("header").innerHTML = t));
      fetch("./src/components/footer.html")
        .then((r) => r.text())
        .then((t) => (document.getElementById("footer").innerHTML = t));

      const SECTION_FILES = ["inicio", "servicios", "ubicacion", "nosotros"];

      Promise.all(
        SECTION_FILES.map((name) =>
          fetch(`./src/sections/${name}.html`).then((r) => r.text())
        )
      ).then((htmlParts) => {
        const container = document.getElementById("sections");
        htmlParts.forEach((html) =>
          container.insertAdjacentHTML("beforeend", html)
        );

        function mostrarSeccion(id) {
          document.querySelectorAll(".pagina-seccion").forEach((sec) => {
            sec.style.display = "none";
          });
          const seccion = document.getElementById(id);
          if (seccion) seccion.style.display = "block";
        }

        window.addEventListener("hashchange", () => {
          const id = location.hash.replace("#", "") || "inicio";
          mostrarSeccion(id);
        });

        const idInicial = location.hash.replace("#", "") || "inicio";
        mostrarSeccion(idInicial);

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) entry.target.classList.add("visible");
            });
          },
          { threshold: 0.2 }
        );

        document
          .querySelectorAll("[data-animate]")
          .forEach((el) => observer.observe(el));
      });
    </script>
  </body>
</html>
